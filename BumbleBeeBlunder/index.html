<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Alexander, Clines" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="TODO: Below is copy-pasta from wordpress.
tl:dr I tried to install Bumblbee on Ubuntu 15.10, messed up, fixed the mistake, back to square one.
So today I attempted to install Bumblebee onto my laptop.">
<meta property="og:type" content="article">
<meta property="og:title" content="BumbleBeeBlunder">
<meta property="og:url" content="http://yoursite.com/BumbleBeeBlunder/index.html">
<meta property="og:site_name" content="Alexander Clines">
<meta property="og:description" content="TODO: Below is copy-pasta from wordpress.
tl:dr I tried to install Bumblbee on Ubuntu 15.10, messed up, fixed the mistake, back to square one.
So today I attempted to install Bumblebee onto my laptop.">
<meta property="og:updated_time" content="2016-11-15T12:58:49.986Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="BumbleBeeBlunder">
<meta name="twitter:description" content="TODO: Below is copy-pasta from wordpress.
tl:dr I tried to install Bumblbee on Ubuntu 15.10, messed up, fixed the mistake, back to square one.
So today I attempted to install Bumblebee onto my laptop.">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/BumbleBeeBlunder/"/>


  <title> BumbleBeeBlunder | Alexander Clines </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Alexander Clines</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Mathematician  & Computer Scientist</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cppe">
          <a href="/categories/CPPE/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-comment"></i> <br />
            
            CPPE
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                BumbleBeeBlunder
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-11-15T06:58:49-06:00" content="2016-11-15">
              2016-11-15
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>TODO: Below is copy-pasta from wordpress.</p>
<p>tl:dr I tried to install Bumblbee on Ubuntu 15.10, messed up, fixed the mistake, back to square one.</p>
<p>So today I attempted to install Bumblebee onto my laptop. Before we begin, here are the relevant specs of my laptop.</p>
<p>Model: Lenovo Y50<br>OS: Ubuntu 15.10<br>Video: Integrated Intel and discrete NVIDIA card<br>The reason why mostly revolves around power consumption. My laptop has two video devices in it, the integrated one in the Intel CPU and the discrete NVIDIA card. With Bumblebee, the graphics card would only be used when called upon by running the command</p>
<p>[bash]optirun program-to-be-run-on-NVIDIA-card [/bash]<br>thus saving lots of power by not constantly running the NVIDIA card and increasing battery life. In my case over an hour!</p>
<p>Now, getting into this, I knew there were risks and on top of that, there were signs that this wouldn&#x2019;t work. Upon doing some online searching (aka Google) it was easy to see that the general internet public viewed Bumblebee as old and to be depreciated. But that did not stop me, I had previously used Bumblebee on this laptop for an older version and it was awesome! I wanted the joy of a longer battery life to come back. Later in this post I will bring this point back up along with what one should use instead of Bumblebee for scenarios like mine. However, probably the biggest sign was that nobody else on the internet seemed to get Bumblebee up and running on a newer NVIDIA card running on Ubuntu 15.10. This is the moment where I should have stopped. But alas, I did not, and I moved on to the installation.</p>
<p>Installing Bumblebee</p>
<p>For the most part I followed the instructions from the top answer to this question on askubuntu.com. In case that link ever changes or otherwise becomes invalid, and for simplicity, I will reiterate what I did below.</p>
<p>Before installing, I had to remove any packages that might interfere the installation.</p>
<p>[bash]sudo apt-get remove &#x2014;purge nvidia*<br>sudo apt-get &#x2014;purge remove xserver-xorg-video-nouveau[/bash]<br>Note: If one had already installed a version of bumblebee that would need to be removed as well</p>
<p>Now for some preliminary installs to make sure all the required headers are installed</p>
<p>[bash]sudo apt-get install linux-source<br>sudo apt-get install linux-headers-$(uname -r)[/bash]<br>Then, blacklist nouveau and nvidia drivers that could cause problems, but first I backed up the files of course!</p>
<p>[bash]<br>sudo cp /etc/modprobe.d/blacklist.conf /etc/modprobe.d/blacklist.conf.bak<br>sudo vim /etc/modprobe.d/blacklist.conf<br>[/bash]<br>Append these lines to the end of the file:</p>
<p>[code]</p>
<h1 id="necessary-to-install-nvidia-drivers"><a href="#Necessary-to-install-nvidia-drivers" class="headerlink" title="Necessary to install nvidia drivers"></a>Necessary to install nvidia drivers <a href="#necessary-to-install-nvidia-drivers" class="header-anchor"></a></h1><p>blacklist nouveau<br>blacklist lbm-nouveau<br>blacklist nvidia-173<br>blacklist nvidia-96<br>blacklist nvidia-current<br>blacklist nvidia-173-updates<br>blacklist nvidia-96-updates<br>alias nvidia nvidia_current_updates<br>alias nouveau off<br>alias lbm-nouveau off<br>options nouveau modeset=0<br>[/code]<br>then save and exit.</p>
<p>Before continuing I brought everything up to speed.</p>
<p>[bash]<br>sudo apt-get update &amp;amp;amp;amp;&amp;amp;amp;amp; sudo apt-get dist-upgrade -y<br>[/bash]<br>It was at this point things got interesting. To continue, I was going to have to stop lightdm so I had to move to working in tty1</p>
<p>Note: tty1 is accessible by pressing CTRL+ALT+F1</p>
<p>After logging in to the terminal I proceeded to stop the lightdm service and to start installing the nvidia packages.</p>
<p>[bash]<br>sudo service lightdm stop<br>sudo apt-get install nvidia-352-updates nvidia-settings<br>[/bash]<br>Now, with the latest NVIDIA drivers, the installation also installs nvidia-prime which is supposed to automatically switch between the integrated Intel video device and the NVIDIA discrete graphics card. This means no user control and that both cards are always on. This means that I would not be able to decrease my laptop&#x2019;s power consumption.</p>
<p>So in order for Bumblebee to work, and since I had no intention of using nvidia-prime I removed it from the system.</p>
<p>[bash]<br>sudo apt-get remove &#x2014;purge nvidia-prime<br>[/bash]<br>And now to add to the PPA for Bumblebee and to install it along with virtualgl packages.</p>
<p>[bash]<br>sudo add-apt-repository ppa:bumblebee/stable<br>sudo apt-get update<br>sudo apt-get install bumblebee bumblebee-nvidia virtualgl virtualgl-libs virtualgl-libs-ia32:i386 virtualgl-libs:i386<br>[/bash]<br>Now that Bumblebee is installed, I added my account to the bumblebee group so I could use it</p>
<p>[bash]<br>sudo usermod -a -G bumblebee $USER<br>[/bash]<br>and then reboot.</p>
<p>Once I go back into the system, I had to modify some configuration files. So first, I went to their location and backed them up.</p>
<p>[bash]<br>cd /etc/bumblebee<br>sudo cp bumblebee.conf  bumblebee.conf.bak<br>sudo cp xorg.conf.nvidia xorg.conf.nvidia.bak<br>[/bash]<br>For the next part, I am just going to quote from the source mentioned at the top of this post.</p>
<p>Then, let&#x2019;s go to modify the first file with sudo gedit bumblebee.conf, adding (all without quotes)</p>
<p>[bumblebeed] section: after &#x201C;Driver=&#x201D; insert &#x201C;nvidia&#x201D;<br>[nvidia-driver] section: after &#x201C;KernelDriver=&#x201D; insert &#x201C;nvidia-XXX-updates&#x201D;<br>[nvidia-driver] section: after &#x201C;LibraryPath=&#x201D; insert &#x201C;/usr/lib/nvidia-XXX-updates, /usr/lib/nvidia-331-updates:/usr/lib32/nvidia-XXX-updates&#x201D;<br>[nvidia-driver] section: after &#x201C;XorgModulePath=&#x201D; insert &#x201C;/usr/lib/nvidia-XXX-updates/xorg,/usr/lib/xorg/modules&#x201D;<br>Assure that the &#x201C;XorgConfFile&#x201D; under [nvidia-driver] is equal to &#x201C;/etc/bumblebee/xorg.conf.nvidia&#x201D; (again, without quotes), then save and close gedit.</p>
<p>Now we have to edit the other file with sudo gedit xorg.conf.nvidia (in this case we have to insert the quotes also!!). Replace Option &#x201C;ConnectedMonitor&#x201D; &#x201C;DFP&#x201D; with Option &#x201C;UseDisplayDevice&#x201D; &#x201C;none&#x201D;, save and exit.</p>
<ol>
<li>Run gedit /etc/modprobe.d/bumblebee.conf and make sure that all the lines containing blacklist <something> are not commented (i.e. they don&#x2019;t start with #).</something></li>
</ol>
<p>Then I ran this command:</p>
<p>[bash][/bash]<br>sudo service bumblebeed start</p>
<p>[bash][/bash]<br>and this is where the error began&#x2026;</p>
<p>The problem</p>
<p>After this command, I did not get a response back like I was to expect, error or otherwise. And upon running this command,</p>
<p>[bash]<br>service &#x2014;status-all | grep bumblebeed<br>[/bash]<br>The service wasn&#x2019;t showing as on, and nothing I could do would fix that.<br>I also tried just running a program to be sure</p>
<p>[bash]<br>optirun glxspheres<br>[/bash]<br>and I got this error:</p>
<p>[code]<br>[ERROR]The Bumblebee daemon has not been started yet or the socket path /var/run/bumblebee.socket was incorrect.<br>[ERROR]Could not connect to bumblebee daemon - is it running?<br>[/code]<br>So I did what seemed logical and rebooted my laptop and that&#x2019;s when things went from bad to worse.</p>
<p>Upon starting back up, instead of being greeted with the Ubuntu login screen, the startup decided to hang up on this line:</p>
<p>[code]<br>Starting Light Display Manager &#x2026; and deal with any system changes ..<br>[/code]<br>And it was at this point, I decided it was time to backtrack and just get my laptop back to working again. Especially cause I had class in an hour and I needed to be able to take notes.</p>
<p>The Solution</p>
<p>First, I reinstalled xorg and lightdm.</p>
<p>The first part was accomplished by going back to tty1 terminal and running these commands:</p>
<p>[bash]<br>sudo apt-get purge xorg lightdm<br>sudo apt-get autoremove<br>sudo apt-get install xorg lightdm<br>[/bash]<br>Upon a reboot I removed all traces of NVIDIA and Bumblebee.</p>
<p>[bash]<br>sudo apt-get purge nvidia<em> &#x2018;^bumblebee.</em>&#x2018;<br>[/bash]<br>After another reboot, I reinstalled the stable NVIDIA proprietary drivers</p>
<p>[bash]<br>sudo apt-get update<br>sudo apt-get install nvidia-352 nvidia-prime<br>[/bash]<br>One final reboot and everything was back to the way it was before this little adventure.</p>
<p>In Conclusion</p>
<p>Well this was a very frustrating exercise, but lesson be learned, wait for it to be tested/verified before installing it.<br>I have reinstalled nvidia-prime and until I find an option that will work and allow me to keep my discrete card off when not in use, this will be my option.</p>
<p>I hope this post helps others who get into this situation fix their computer and get back on with their lives.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/HT-Cuda-7-5-Ubuntu-15-10/" rel="next" title="HT-Cuda_7_5_Ubuntu_15_10">
                <i class="fa fa-chevron-left"></i> HT-Cuda_7_5_Ubuntu_15_10
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/CPP-Template-Functions-Inside-Template-Classes/" rel="prev" title="CPP Template Functions Inside Template Classes">
                CPP Template Functions Inside Template Classes <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/me.jpg"
               alt="Alexander Clines" />
          <p class="site-author-name" itemprop="name">Alexander Clines</p>
          <p class="site-description motion-element" itemprop="description">Personal website, portfolio and blog for Alexander Clines</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/asclines" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/story/alexanderclines" target="_blank" title="StackOverflowStory">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                  StackOverflowStory
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:alexander.clines@ttu.edu" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/alexander-clines-47a3b292" target="_blank" title="LinkedIn">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  LinkedIn
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#necessary-to-install-nvidia-drivers"><span class="nav-number">1.</span> <span class="nav-text">Necessary to install nvidia drivers </span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alexander Clines</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  

  


</body>
</html>
